services:
  opsdec:
    build: .
    container_name: opsdec
    restart: unless-stopped
    ports:
      - "3001:3001"
    volumes:
      # Persist database
      - ./data:/app/backend/data
    environment:
      # Server Configuration
      - PORT=3001
      - NODE_ENV=production
      - DB_PATH=/app/backend/data/opsdec.db

      # User/Group Configuration (for Unraid compatibility)
      # Set to your user's UID/GID if you have permission issues
      # Default: 1000:1000 (standard Docker node user)
      # To find your UID: run 'id -u' on your Unraid terminal
      # To find your GID: run 'id -g' on your Unraid terminal
      - PUID=1000
      - PGID=1000

      # Emby Configuration
      - EMBY_URL=http://your-server-ip:8097
      - EMBY_API_KEY=your_emby_api_key_here

      # Plex Configuration
      - PLEX_URL=http://your-server-ip:32401
      - PLEX_TOKEN=your_plex_token_here

      # Audiobookshelf Configuration (Optional)
      - AUDIOBOOKSHELF_URL=http://your-server-ip:13378
      - AUDIOBOOKSHELF_API_KEY=your_audiobookshelf_token_here

      # Polling Configuration
      - POLL_INTERVAL=30
    networks:
      - opsdec

networks:
  opsdec:
    name: opsdec
